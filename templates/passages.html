{% extends "base.html" %}

{% block title %}{{ t('nav.passages') }} - {{ site_title }}{% endblock %}

{% block content %}
<div class="mb-6">
    <h2 class="font-bold">{{ t('passages.title') }}</h2>
</div>

{% if passage_list %}
<div class="space-y-3">
    {% for p in passage_list %}
    <a href="{{ base_url }}passages/{{ p.slug }}/" class="passage-card">
        <div class="flex-between">
            <div>
                <h3>{{ p.name }}</h3>
                {% if p.description %}
                <p class="text-sm text-muted mt-2">{{ p.description }}</p>
                {% endif %}
            </div>
            <div class="flex items-center gap-3">
                <span class="meta">{{ t('passages.sentence_count', count=p.sentence_count) }}</span>
                {% if p.has_audio %}
                <span class="icon-audio" title="Has audio">
                    <svg fill="currentColor" viewBox="0 0 20 20">
                        <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"/>
                    </svg>
                </span>
                {% endif %}
                <svg class="icon-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-8 text-muted">
    <p>No passages found.</p>
    <p class="text-sm mt-2">Add passages to <code>data/passages.json</code></p>
</div>
{% endif %}
{% endblock %}
